<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OBL Cocktail Handbook</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
      margin: 0;
      padding: 2rem;
      background: #f9f9f9;
      color: #111;
      text-align: center;
    }
    h1 {
      margin-bottom: 1rem;
    }
    h2 {
      margin-top: 3rem;
      font-size: 1.5rem;
      color: #444;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }
    .card {
      background: white;
      padding: 1rem;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .card a {
      text-decoration: none;
      color: #333;
      font-weight: bold;
    }
    .tag {
      display: block;
      font-size: 0.8rem;
      margin-top: 0.5rem;
      color: #666;
    }
    .back-link {
      margin-top: 3rem;
      display: block;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>
  <h1>OBL Cocktail Handbook</h1>
  <div id="content">Loading...</div>
  <a href="/" class="back-link">‚Üê Back to Main Portal</a>

  <script>
    async function loadCocktails() {
      try {
        const res = await fetch('/data/cocktail_data_backup.json');
        const data = await res.json();

        const categories = ["Classic", "House Riff", "Non-Alcoholic", "Uncategorised"];
        const grouped = {
          "Classic": [],
          "House Riff": [],
          "Non-Alcoholic": [],
          "Uncategorised": []
        };

        data.forEach(cocktail => {
          const category = categories.includes(cocktail.category) ? cocktail.category : "Uncategorised";
          grouped[category].push(cocktail);
        });

        let html = '';
        for (const category of categories) {
          html += `<h2>${category}</h2><div class="grid">`;
          grouped[category]
            .sort((a, b) => a.title.localeCompare(b.title))
            .forEach(cocktail => {
              const slug = cocktail.title.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '');
              html += `<div class="card"><a href="/cocktails/cocktail.html?slug=${slug}">${cocktail.title}</a><span class="tag">${category}</span></div>`;
            });
          html += '</div>';
        }

        document.getElementById('content').innerHTML = html;
      } catch (err) {
        console.error(err);
        document.getElementById('content').innerHTML = '<p style="color:red;">Failed to load cocktail data.</p>';
      }
    }

    loadCocktails();
  </script>
</body>
</html>